(this["webpackJsonpspot-spotter"]=this["webpackJsonpspot-spotter"]||[]).push([[0],{109:function(e,t,n){e.exports={pageWrapper:"Auth_pageWrapper__1Pm6y",formWrapper:"Auth_formWrapper__3I0l-",formTitle:"Auth_formTitle__1GJoM"}},110:function(e,t,n){e.exports={pageWrapper:"AddPoint_pageWrapper__30xtN",noInfoWrapper:"AddPoint_noInfoWrapper__2h-MF",noInfoSection:"AddPoint_noInfoSection__3b07K"}},111:function(e,t,n){e.exports={pageWrapper:"AddPointPanel_pageWrapper__2_XrY",positionWrapper:"AddPointPanel_positionWrapper__2SzJY",addPointWrapper:"AddPointPanel_addPointWrapper__fU6cO"}},122:function(e,t,n){e.exports={pageWrapper:"SidePanel_pageWrapper__1fJhL",advertisement:"SidePanel_advertisement__1v1Zg"}},123:function(e,t,n){e.exports={daySectionWrapper:"DaySection_daySectionWrapper__11eth",dayTitle:"DaySection_dayTitle__LeLSK"}},124:function(e,t,n){e.exports={monthSectionWrapper:"MonthSection_monthSectionWrapper__17od0",monthTitle:"MonthSection_monthTitle__3ZJ45"}},146:function(e,t,n){e.exports={pageWrapper:"Map_pageWrapper__8XAQo"}},147:function(e,t,n){e.exports={pin:"MapPoint_pin__1VJWM"}},148:function(e,t,n){e.exports={menu:"MainNavigation_menu__ArWsl"}},150:function(e,t,n){e.exports={pageWrapper:"Main_pageWrapper__33Oqw"}},151:function(e,t,n){e.exports={pageWrapper:"AddPointMap_pageWrapper__2UzRL"}},163:function(e,t,n){},165:function(e,t,n){},239:function(e,t,n){e.exports={pin:"Point_pin__3g0Rv",bounce:"Point_bounce__1EeBc",pulse:"Point_pulse__3Awnq",pulsate:"Point_pulsate__1Wqz7"}},240:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),c=n(25),s=n.n(c),o=(n(163),n(164),n.p,n(165),n(26)),l=n(60),u=n(9),p=Object(i.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),d=n(29),j=n(31),b=n.n(j),m=n(45),h=n(247),O=n(251),f=n(102),x=n(109),g=n.n(x),v=function(){var e=Object(i.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(i.useRef)([]),p=Object(i.useCallback)(function(){var e=Object(m.a)(b.a.mark((function e(t){var n,i,a,c,s,u,p,d=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"GET",i=d.length>2&&void 0!==d[2]?d[2]:null,a=d.length>3&&void 0!==d[3]?d[3]:{},r(!0),c=new AbortController,l.current.push(c),s="https://www.spotspotter.space/api/"+t,e.prev=7,e.next=10,fetch(s,{method:n,body:i,headers:a,signal:c.signal});case 10:return u=e.sent,e.next=13,u.json();case 13:if(p=e.sent,l.current=l.current.filter((function(e){return e!==c})),r(!1),u.ok){e.next=18;break}throw new Error(p.message);case 18:return e.abrupt("return",p);case 21:throw e.prev=21,e.t0=e.catch(7),o(e.t0.message),r(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[7,21]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(i.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:s,sendRequest:p,clearError:function(){o(null)}}},_=n(3),y={labelCol:{span:8},wrapperCol:{span:16}},S={wrapperCol:{offset:8,span:16}},W=function(e,t){switch(t.type){case"switch":return!1===e.isSignup?{isSignup:!0,authTitle:"Sign Up",submitBtn:"Sign Up",sideBtn:"Login"}:{isSignup:!1,authTitle:"Login",submitBtn:"Login",sideBtn:"Sign Up"}}},k=function(){var e=Object(i.useContext)(p),t=(Object(o.g)(),v()),n=t.isLoading,r=(t.error,t.sendRequest),a=t.clearError,c=Object(i.useReducer)(W,{isSignup:!1,authTitle:"Login",submitBtn:"Login",sideBtn:"Sign Up"}),s=Object(u.a)(c,2),l=s[0],j=s[1],x=Object(i.useState)(!1),k=Object(u.a)(x,2),N=(k[0],k[1],function(){var t=Object(m.a)(b.a.mark((function t(n){var i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r("users/login","POST",JSON.stringify({email:n.email,password:n.password}),{"Content-Type":"application/json"});case 3:i=t.sent,e.login(i.userId,i.token),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),setTimeout((function(){a()}),5e3);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),C=function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("users/signup","POST",JSON.stringify({name:t.name,email:t.email,password:t.password}),{"Content-Type":"application/json"});case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),setTimeout((function(){a()}),5e3);case 10:return e.next=12,N(t);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:g.a.pageWrapper,children:Object(_.jsxs)("div",{className:g.a.formWrapper,children:[Object(_.jsx)("div",{className:g.a.formTitle,children:l.authTitle}),Object(_.jsxs)(h.a,Object(d.a)(Object(d.a)({},y),{},{name:"basic",initialValues:{remember:!0},onFinish:function(e){console.log("Success:",e),l.isSignup?C(e):N(e)},onFinishFailed:function(e){console.log("Failed:",e)},children:[l.isSignup&&Object(_.jsx)(h.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please give your account a name!"}],children:Object(_.jsx)(O.a,{})}),Object(_.jsx)(h.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(_.jsx)(O.a,{})}),Object(_.jsx)(h.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(_.jsx)(O.a.Password,{})}),Object(_.jsxs)(h.a.Item,Object(d.a)(Object(d.a)({},S),{},{children:[Object(_.jsx)(f.a,{loading:n,style:{marginRight:"10px"},type:"primary",htmlType:"submit",children:l.submitBtn}),Object(_.jsx)(f.a,{type:"dark",onClick:function(){j({type:"switch"})},children:l.sideBtn})]}))]}))]})})},N=(n(138),n(242)),C=n(253),w=n(243),I=n(244),T=n(146),P=n.n(T),D=(n(147),n(40)),M=n.n(D),E=n.p+"static/media/red-marker.f117c780.svg",F=n.p+"static/media/blue-marker.3ead5115.svg",A=new M.a.Icon({iconUrl:E,iconRetinaUrl:E,popupAnchor:[-0,-0],iconSize:[30,30],iconAnchor:[15,30]}),L=new M.a.Icon({iconUrl:F,iconRetinaUrl:F,popupAnchor:[-0,-0],iconSize:[30,30],iconAnchor:[15,30]}),R=function(e){var t=Object(i.useState)(15),n=Object(u.a)(t,2),r=n[0],a=(n[1],Object(i.useState)()),c=Object(u.a)(a,2),s=c[0],o=c[1];return Object(_.jsx)("div",{className:P.a.pageWrapper,children:Object(_.jsx)("div",{style:{height:"100%",width:"100%"},children:Object(_.jsxs)(N.a,{style:{height:"".concat(window.innerHeight,"px"),width:"100%"},center:{lat:45.498478,lng:-73.567705},zoom:15,zoomControl:!1,scrollWheelZoom:!0,children:[Object(_.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(_.jsx)(w.a,{position:"bottomright"}),r>14&&e.pointsList&&e.pointsList.length>0&&e.pointsList.map((function(t,n){return Object(_.jsx)(I.a,{icon:(r=t.id,r===s?A:L),position:{lat:t.lat,lng:t.lng},eventHandlers:{click:function(){return function(t){o(t.id),e.onClickIcon(t)}(t)}}},t.id);var r}))]})})})},B=n(248),H=n(148),z=n.n(H),q=(B.a.SubMenu,function(){var e=Object(i.useContext)(p);return Object(_.jsxs)(B.a,{onClick:function(e){console.log("click ",e)},className:z.a.menu,style:{height:"100vh"},defaultSelectedKeys:["map"],defaultOpenKeys:["sub1"],mode:"vertical",children:[Object(_.jsxs)(B.a.ItemGroup,{title:"Main Menu",children:[Object(_.jsx)(B.a.Item,{children:Object(_.jsx)(l.b,{to:"/",children:"Map"})},"map"),e.isLoggedIn&&Object(_.jsx)(B.a.Item,{children:Object(_.jsx)(l.b,{to:"/add-point",children:"Add Spot"})},"addPoint")]},"main"),Object(_.jsxs)(B.a.ItemGroup,{title:"User",children:[!e.isLoggedIn&&Object(_.jsx)(B.a.Item,{children:Object(_.jsx)(l.b,{to:"/login",children:"Login"})},"login"),e.isLoggedIn&&Object(_.jsx)(B.a.Item,{children:Object(_.jsx)(l.b,{onClick:function(){e.logout()},children:"Log Out"})},"logout")]},"user")]})}),J=n(154),U=n(250),G=n(28),V=n(122),Y=n.n(V),K=n(249),Z=n(38),Q=n.n(Z),X=K.a.Option,$=function(e){var t=Object(i.useState)(1),n=Object(u.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(1),s=Object(u.a)(c,2),o=s[0],l=s[1],p=Object(i.useState)(23),d=Object(u.a)(p,2),j=d[0],b=d[1],m=Object(i.useState)(!1),h=Object(u.a)(m,2),x=h[0],g=h[1],v=Object(i.useState)(!1),y=Object(u.a)(v,2),S=y[0],W=y[1],k=Object(i.useState)(1),N=Object(u.a)(k,2),C=N[0],w=N[1];return Object(_.jsxs)("div",{className:Q.a.filterWrapper,children:[S&&Object(_.jsx)("div",{className:Q.a.title,onClick:function(){return g((function(e){return!e}))},children:"Paradoxical Time Filter"}),x&&Object(_.jsx)("div",{children:"This filter is special. You need to enter your upper and lower limit time of arrival.(If you can arrive at Monday between 5pm and 6pm, then enter Mon,5pm,6pm) It is going to filter all the spots that just become available in this time range. If a spot has 'No parking' before 6pm, then if you arrive at 5:45pm, you will be guaranteed a spot, just wait until 6pm and leave.(unless its really downtown, people park there even they are going to get a ticket) It's paradoxical because it filters when the spot is unusable rather than when its usable."}),!S&&Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:Q.a.simpleFilterWrapper,children:[Object(_.jsxs)("div",{className:Q.a.simpleFilter,children:[Object(_.jsx)("div",{className:Q.a.simpleFilterPlusMinus,onClick:function(){return w((function(e){return e-1}))},children:Object(_.jsx)(G.a,{})}),Object(_.jsxs)("div",{className:Q.a.simpleFilterMiddle,onClick:function(){e.onReset();var t=new Date,n=t.getDay(),r=t.getHours(),i=t.getHours()+C;console.log(n,r,i),e.onFilter({day:n,startHour:r,endHour:i})},children:["Next ",C," Hour"]}),Object(_.jsx)("div",{className:Q.a.simpleFilterPlusMinus,onClick:function(){return w((function(e){return e+1}))},children:Object(_.jsx)(G.g,{})})]}),Object(_.jsx)("div",{className:Q.a.simpleReset,onClick:e.onReset,children:"Reset"})]}),Object(_.jsx)("div",{className:Q.a.simpleExpand,onClick:function(){return W((function(e){return!e}))},children:Object(_.jsx)(G.b,{})})]}),S&&Object(_.jsxs)("div",{className:Q.a.inputsWrapper,children:[Object(_.jsxs)(O.a.Group,{compact:!0,children:[Object(_.jsxs)(K.a,{onChange:function(e){a(e)},defaultValue:1,children:[Object(_.jsx)(X,{value:1,children:"Mon"}),Object(_.jsx)(X,{value:2,children:"Tue"}),Object(_.jsx)(X,{value:3,children:"Wed"}),Object(_.jsx)(X,{value:4,children:"Thu"}),Object(_.jsx)(X,{value:5,children:"Fri"}),Object(_.jsx)(X,{value:6,children:"Sat"}),Object(_.jsx)(X,{value:0,children:"Sun"})]}),Object(_.jsx)(K.a,{onChange:function(e){l(e)},defaultValue:1,style:{marginLeft:"10px"},children:Array(24).fill(1).map((function(e,t){return Object(_.jsxs)(X,{value:t,children:[t,":00"]},t)}))}),Object(_.jsx)(O.a,{className:"site-input-split",style:{width:30,borderLeft:0,borderRight:0,pointerEvents:"none"},placeholder:"~",disabled:!0}),Object(_.jsx)(K.a,{onChange:function(e){b(e)},defaultValue:23,children:Array(24).fill(1).map((function(e,t){return Object(_.jsxs)(X,{value:t,children:[t,":00"]},t)}))})]}),Object(_.jsxs)("div",{className:Q.a.btnWrapper,children:[Object(_.jsx)(f.a,{type:"primary",onClick:function(){console.log(r,o,j),e.onFilter({day:r,startHour:o,endHour:j})},style:{marginRight:"10px"},children:"Filter"}),Object(_.jsx)(f.a,{type:"dark",onClick:e.onReset,children:"Reset"})]}),Object(_.jsx)("div",{className:Q.a.simpleExpand,onClick:function(){return W((function(e){return!e}))},children:Object(_.jsx)(G.c,{})})]})]})},ee={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},te={0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"WeekDay",8:"All Week"},ne={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday",7:"Week Day",8:"All Week"},re=n(39),ie=n.n(re),ae=n(68),ce=n.n(ae),se=function(e){return Object(_.jsx)("div",{children:e.info.limit&&e.info.limit.map((function(e,t){return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:ce.a.monthWrapper,children:[ee[e.monthStart]," to ",ee[e.monthEnd]]}),Object(_.jsx)("div",{className:ce.a.spliter}),e.day.map((function(e,t){return Object(_.jsxs)("div",{className:ce.a.dayWrapper,children:[Object(_.jsxs)("div",{className:ce.a.dayTitle,children:[te[e.num],":"]}),Object(_.jsx)("div",{className:ce.a.timeStyle,children:e.time.map((function(e,t){return Object(_.jsx)("div",{children:"".concat(e.startHour,":").concat(e.startMinute," to ").concat(e.endHour,":").concat(e.endMinute)},t)}))})]},t)})),Object(_.jsx)("div",{className:ce.a.spliter})]},t)}))})},oe=n(80),le=n.n(oe),ue=function(e){var t=new Date,n=(t.getMonth(),t.getDay(),!1);Object(i.useEffect)((function(){e.onShowMonth(n)}),[e.info]);var r=function(e,t){for(var r=new Date,i=!1,c=0;c<e.day.length;c++)(e.day[c].num===r.getDay()||e.day[c].num>7||6===e.day[c].num&&r.getDay()>0&&r.getDay()<6)&&(i=!0);if(i)return n=!0,console.log("showMonthFlag reached"),Object(_.jsxs)(_.Fragment,{children:[e.monthStart===e.monthEnd&&Object(_.jsxs)("div",{className:le.a.monthWrapper,children:[Object(_.jsx)(G.e,{style:{color:"red",fontSize:"0.9rem"}}),"\xa0\xa0All Year"]}),e.monthStart!==e.monthEnd&&Object(_.jsxs)("div",{className:le.a.monthWrapper,children:[Object(_.jsx)(G.e,{style:{color:"red",fontSize:"0.9rem"}}),"\xa0\xa0",ee[e.monthStart]," to ",ee[e.monthEnd]]}),e.day.map((function(e,t){return a(e,t)}))]})},a=function(e,n){if(e.num===t.getDay()||e.num>7||e.num>6&&t.getDay()>0&&t.getDay()<5)return Object(_.jsxs)("div",{className:le.a.dayWrapper,children:[Object(_.jsxs)("div",{className:le.a.dayTitle,children:[ne[e.num],"\xa0"]}),Object(_.jsx)("div",{className:le.a.timeStyle,children:e.time.map((function(e,t){return Object(_.jsxs)("div",{children:["\u2022 ","".concat(e.startHour,":").concat(e.startMinute," to ").concat(e.endHour,":").concat(e.endMinute)]},t)}))})]},n)};return Object(_.jsxs)("div",{children:[e.info.limit&&e.info.limit.map((function(e,t){return Object(_.jsx)("div",{children:r(e)},t)})),Object(_.jsx)("div",{})]})},pe=function(e){var t=Object(i.useState)(!1),n=Object(u.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!0),s=Object(u.a)(c,2),o=s[0],l=s[1];return Object(_.jsxs)("div",{className:ie.a.infoCardWrapper,children:[r&&Object(_.jsxs)("div",{children:[Object(_.jsx)(se,Object(d.a)({},e)),Object(_.jsxs)("div",{className:ie.a.spotsWrapper,children:[Object(_.jsx)("div",{children:"Spots Amount :"}),Object(_.jsx)("div",{children:e.info.numSpots})]}),Object(_.jsxs)("div",{className:ie.a.descriptionWrapper,children:[Object(_.jsx)("div",{children:"Description :"}),Object(_.jsx)("div",{style:{wordWrap:"break-word"},children:e.info.description})]}),Object(_.jsx)("div",{className:ie.a.positionWrapper,children:Object(_.jsxs)("div",{children:[e.info.lat,",",e.info.lng]})}),Object(_.jsx)("div",{className:ie.a.positionWrapper,children:Object(_.jsx)("a",{href:"http://maps.google.com/?q=".concat(e.info.lat,",").concat(e.info.lng),children:"Go to Google Map"})}),Object(_.jsx)("div",{className:ie.a.positionWrapper,children:e.info.creator===e.userId&&Object(_.jsx)(f.a,{type:"primary",danger:!0,onClick:function(){return e.onDeleteSpot()},children:"Delete"})}),Object(_.jsx)("div",{className:ie.a.simpleExpand,onClick:function(){return a((function(e){return!e}))},children:Object(_.jsx)(G.c,{})})]}),!r&&Object(_.jsxs)("div",{children:[o&&Object(_.jsxs)("div",{className:ie.a.monthEmptyPlaceholder,children:[Object(_.jsx)(G.f,{style:{color:"#27c200",fontSize:"0.9rem"}}),"\xa0\xa0No Restrictions Today"]}),Object(_.jsx)(ue,Object(d.a)(Object(d.a)({},e),{},{onShowMonth:function(e){l(!e)}})),Object(_.jsxs)("div",{className:ie.a.BtnWrapper,children:[Object(_.jsx)("a",{href:"http://maps.google.com/?q=".concat(e.info.lat,",").concat(e.info.lng),children:Object(_.jsxs)("div",{className:ie.a.BtnDirection,children:[Object(_.jsx)(G.d,{style:{fontSize:"1rem"}}),Object(_.jsx)("div",{children:"\xa0Direction"})]})}),Object(_.jsxs)("div",{className:ie.a.BtnAdd,onClick:function(){e.onAddTrip(e.info)},children:[Object(_.jsx)(G.h,{style:{fontSize:"1rem"}}),Object(_.jsx)("div",{children:"\xa0Add To Trip"})]})]}),Object(_.jsx)("div",{className:ie.a.simpleExpand,onClick:function(){return a((function(e){return!e}))},children:Object(_.jsx)(G.b,{})})]})]})},de=n(62),je=n.n(de),be=function(e){return Object(_.jsx)("div",{className:je.a.pageWrapper,children:Object(_.jsxs)("div",{className:je.a.tripsWrapper,children:[Object(_.jsx)("div",{className:je.a.pointsWrapper,children:e.trips.length>0&&e.trips.map((function(e,t){return Object(_.jsx)("div",{className:je.a.points},e.id)}))}),Object(_.jsxs)("div",{className:je.a.btnWrapper,children:[Object(_.jsx)("div",{className:je.a.BtnReset,onClick:function(){return e.onResetTrips()},children:Object(_.jsx)("div",{children:"Reset"})}),Object(_.jsxs)("div",{className:je.a.BtnDirection,onClick:function(){return e.onTripsGo()},children:[Object(_.jsx)(G.d,{style:{fontSize:"1rem"}}),Object(_.jsx)("div",{children:"\xa0GO"})]})]})]})})},me=function(e){var t=Object(i.useContext)(p),n=v(),r=n.isLoading,a=n.error,c=n.sendRequest,s=(n.clearError,Object(i.useState)(0)),o=Object(u.a)(s,2),l=o[0],d=o[1],j=Object(i.useState)(!0),h=Object(u.a)(j,2),O=h[0],f=h[1],x=Object(i.useState)([]),g=Object(u.a)(x,2),y=g[0],S=g[1],W=function(){var n=Object(m.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c("spot/deleteSpot/".concat(e.info.id),"DELETE",{},{Authorization:"Bearer "+t.token});case 3:r=n.sent,console.log(r),a||(d(1),setTimeout((function(){d(0)}),5e3),e.onDeleteSpot(e.info.id)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),d(2),setTimeout((function(){d(0)}),5e3);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:Y.a.pageWrapper,children:[O&&Object(_.jsxs)("div",{className:Y.a.advertisement,children:[Object(_.jsx)("a",{href:"https://www.linkedin.com/in/chang-anting-87a619a5/",style:{textDecoration:"underline"},children:"Anting is looking for a Front End Dev Job"}),Object(_.jsx)("div",{onClick:function(){return f(!1)},children:Object(_.jsx)(G.i,{style:{color:"#999"}})})]}),Object(_.jsx)($,{onFilter:function(t){e.onFilter(t)},onReset:function(){return e.onReset()}}),y.length>0&&Object(_.jsx)(be,{trips:y,onTripsGo:function(){for(var e="https://www.google.com/maps/dir//",t=0;t<y.length;t++)e="".concat(e).concat(y[t].lat,",").concat(y[t].lng,"/");window.location.href=e},onResetTrips:function(){S([])}}),null!==e.info&&Object(_.jsx)(pe,{loading:r,info:e.info,userId:t.userId,onAddTrip:function(e){for(var t=0;t<y.length;t++)if(y[t].id===e.id)return;y.length>=8||S((function(t){return[].concat(Object(J.a)(t),[e])}))},onDeleteSpot:W}),1===l&&Object(_.jsx)(U.a,{style:{marginTop:"10px"},message:"Successfully Deleted",type:"success"}),2===l&&Object(_.jsx)(U.a,{style:{marginTop:"10px"},message:"Delete failed",type:"danger"})]})},he=n(150),Oe=n.n(he),fe=function(){var e=Object(i.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(null),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(i.useState)(null),p=Object(u.a)(l,2),d=p[0],j=p[1],h=v(),O=(h.isLoading,h.error,h.sendRequest);h.clearError;Object(i.useEffect)((function(){(function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("spot/getAllSpots");case 3:t=e.sent,o(t.spot),j(t.spot),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);Object(i.useEffect)((function(){}),[s]);return Object(_.jsxs)("div",{className:Oe.a.pageWrapper,children:[Object(_.jsx)(R,{onClickIcon:function(e){r(e)},pointsList:s}),Object(_.jsx)(me,{info:n,onFilter:function(e){var t,n=e.day;t=e.day<=5&&e.day>0?7:-1;var r=e.startHour,i=e.endHour;o((function(e){var a=new Array,c=!1;return d.map((function(e){e.limit.map((function(e){e.day.map((function(e){e.num!=n&&8!=e.num&&e.num!=t||e.time.map((function(e){e.endHour>=r&&e.endHour<=i&&(c=!0)}))}))})),c&&a.push(e),c=!1})),console.log(a),a}))},onReset:function(){o(d)},onDeleteSpot:function(e){console.log("deleteSpot",e);var t=d.filter((function(t){return e!=t.id}));console.log("newArray",t),j(t),o(t)}})]})},xe=n(151),ge=n.n(xe),ve=(n(239),n(245)),_e=function(e){var t=Object(ve.a)({click:function(n){console.log(n),e.onClickPoint(n.latlng),t.locate()},locationfound:function(e){console.log("location found:",e)}});return null},ye=function(e){var t=Object(i.useState)({lat:45.498478,lng:-73.567705}),n=Object(u.a)(t,2),r=n[0],a=n[1];return Object(_.jsx)("div",{className:ge.a.pageWrapper,children:Object(_.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(_.jsxs)(N.a,{style:{height:"100vh",width:"100%"},center:{lat:45.498478,lng:-73.567705},zoom:17,scrollWheelZoom:!0,children:[Object(_.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(_.jsx)(_e,{onClickPoint:function(t){var n=t.lat,r=t.lng;a({lat:n,lng:r}),e.onChoosePoint({lat:n,lng:r})}}),Object(_.jsx)(I.a,{position:r})]})})})},Se=n(110),We=n.n(Se),ke=n(125),Ne=n(246),Ce=n(123),we=n.n(Ce),Ie=function(e){var t=Object(i.useState)(!0),n=Object(u.a)(t,2),r=n[0],a=(n[1],Object(i.useState)({})),c=Object(u.a)(a,2),s=c[0],o=c[1],l=Object(i.useState)({}),p=Object(u.a)(l,2),j=p[0],b=p[1],m=Object(i.useState)([]),h=Object(u.a)(m,2),O=h[0],x=h[1];return Object(_.jsxs)("div",{className:we.a.daySectionWrapper,children:[Object(_.jsx)("div",{className:we.a.dayTitle,children:te[e.day.num]}),O&&O.length>0&&O.map((function(e,t){return Object(_.jsx)("div",{children:Object(_.jsxs)("div",{children:[e.startHour,":",e.startMinute," to ",e.endHour,":",e.endMinute]})},t)})),r&&Object(_.jsxs)("div",{children:[Object(_.jsx)(Ne.a,{onChange:function(e,t){o({startHour:t.slice(0,2),startMinute:t.slice(3,5)})}}),Object(_.jsx)(Ne.a,{onChange:function(e,t){b({endHour:t.slice(0,2),endMinute:t.slice(3,5)})}}),Object(_.jsx)(f.a,{style:{marginLeft:"10px"},type:"primary",onClick:function(){x((function(t){var n=t.concat(Object(d.a)(Object(d.a)({},s),j));return e.onSubmitTime(n,e.index),n}))},children:"Add"})]})]})},Te=n(124),Pe=n.n(Te),De=K.a.Option,Me=function(e){var t=Object(i.useState)([]),n=Object(u.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(1),s=Object(u.a)(c,2),o=s[0],l=s[1],p=function(t,n){a((function(r){return r[n].time=t,console.log("submitted time",r),e.onSubmitDay(r,e.index),r}))};return Object(_.jsxs)("div",{className:Pe.a.monthSectionWrapper,children:[Object(_.jsxs)("div",{className:Pe.a.monthTitle,children:[ee[e.month.monthStart]," to ",ee[e.month.monthEnd]]}),r&&r.length>0&&r.map((function(e,t){return Object(_.jsx)(Ie,{day:e,index:t,onSubmitTime:p},t)})),Object(_.jsxs)("div",{children:[Object(_.jsxs)(K.a,{onChange:function(e){l(e),console.log(e)},defaultValue:1,children:[Object(_.jsx)(De,{value:1,children:"Mon"}),Object(_.jsx)(De,{value:2,children:"Tue"}),Object(_.jsx)(De,{value:3,children:"Wed"}),Object(_.jsx)(De,{value:4,children:"Thu"}),Object(_.jsx)(De,{value:5,children:"Fri"}),Object(_.jsx)(De,{value:6,children:"Sat"}),Object(_.jsx)(De,{value:0,children:"Sun"}),Object(_.jsx)(De,{value:7,children:"WeekDay"}),Object(_.jsx)(De,{value:8,children:"AllWeek"})]}),Object(_.jsx)(f.a,{style:{marginLeft:"10px"},type:"primary",onClick:function(){a((function(e){console.log("day submitted",o);var t=e.concat({num:o,time:[]});return console.log("day submitted",t),t}))},children:"Add"})]})]})},Ee=n(111),Fe=n.n(Ee),Ae=(K.a.Option,ke.a.RangePicker),Le=function(e){var t=Object(i.useState)({}),n=Object(u.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)([]),s=Object(u.a)(c,2),o=s[0],l=s[1],p=Object(i.useState)(5),d=Object(u.a)(p,2),j=d[0],b=d[1],m=Object(i.useState)(""),h=Object(u.a)(m,2),x=h[0],g=h[1],v=Object(i.useState)({ifInputError:!1,message:""}),y=Object(u.a)(v,2),S=y[0],W=y[1];Object(i.useEffect)((function(){l([])}),[e.sendSuccessful]);var k=function(){l([]),a((function(e){return{monthStart:e.monthStart,monthEnd:e.monthEnd,day:[]}}))},N=function(e,t){console.log("main section reached"),l((function(n){return n[t].day=e,console.log("main section",n),n}))};return Object(_.jsx)("div",{className:Fe.a.pageWrapper,children:e.point&&Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{className:Fe.a.positionWrapper,children:[Object(_.jsxs)("div",{children:["lat: ",e.point.lat]}),Object(_.jsxs)("div",{children:["lat: ",e.point.lng]})]}),Object(_.jsxs)("div",{className:Fe.a.addPointWrapper,children:[o&&o.length>0&&o.map((function(e,t){return Object(_.jsx)(Me,{month:e,index:t,onSubmitDay:N},t)})),Object(_.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(_.jsx)(Ae,{onChange:function(e,t){console.log("date String",t);var n=t[0].split("-")[1]-1,r=t[1].split("-")[1]-1;a({monthStart:n,monthEnd:r,day:[]})},picker:"month",bordered:!1}),Object(_.jsx)(f.a,{type:"primary",onClick:function(){l((function(e){var t=e.concat(r);return console.log(t),t}))},children:"Add"})]}),Object(_.jsx)("div",{style:{marginBottom:16},children:Object(_.jsx)(O.a,{addonBefore:"Number of Spots",defaultValue:"5",onChange:function(e){b(e.target.value)}})}),Object(_.jsx)("div",{style:{marginBottom:16},children:Object(_.jsx)(O.a,{addonBefore:"Description",defaultValue:"",onChange:function(e){g(e.target.value)}})}),Object(_.jsx)(f.a,{type:"primary",onClick:function(){var t=!1;return 0===o.length?W({ifInputError:!0,message:"Month range is empty!"}):(o.map((function(e){0===e.day.length&&(t=!0,W({ifInputError:!0,message:"Day or time is empty!"}))})),console.log(o),t?void 0:j>0&&j<50?(W({ifInputError:!1,message:""}),k(),e.onSubmitMonth(o,j,x)):void W({ifInputError:!0,message:"Number of Spots not valid!"}))},loading:e.loading,style:{marginRight:"10px"},children:"Submit"}),Object(_.jsx)(f.a,{style:{marginBottom:"10px"},type:"dark",onClick:k,children:"Reset"}),e.error&&Object(_.jsx)(U.a,{message:"Add spot failed",type:"error"}),e.sendSuccessful&&Object(_.jsx)(U.a,{message:"Add spot success",type:"success"}),S.ifInputError&&Object(_.jsx)(U.a,{message:S.message,type:"error"})]})]})})},Re=function(){var e=Object(i.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(i.useState)(!1),c=Object(u.a)(a,2),s=c[0],o=c[1],l=v(),d=l.isLoading,j=l.error,h=l.sendRequest,O=l.clearError,f=Object(i.useContext)(p),x=function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("send post point",n),e.prev=1,e.next=4,h("spot/postSpot","POST",JSON.stringify(n),{"Content-Type":"application/json",Authorization:"Bearer "+f.token});case 4:e.sent,j||(o(!0),setTimeout((function(){r(null),o(!1)}),5e3)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){O()}),5e3);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)("div",{className:We.a.pageWrapper,children:[Object(_.jsx)(ye,{onChoosePoint:function(e){r(e)}}),null==n&&Object(_.jsx)("div",{className:We.a.noInfoWrapper,children:Object(_.jsx)("div",{className:We.a.noInfoSection,children:"No point is choosen, please click on the map to choose a point"})}),n&&Object(_.jsx)(Le,{point:n,error:j,sendSuccessful:s,loading:d,onSubmitMonth:function(e,t,n){r((function(r){return r.limit=e,r.numSpots=t,r.description=n,r})),x()}})]})};var Be=function(){var e,t=function(){console.log("app is rerendering");var e=Object(i.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(i.useState)(),s=Object(u.a)(c,2),o=s[0],l=s[1],p=Object(i.useState)(),d=Object(u.a)(p,2),j=d[0],b=d[1],m=Object(i.useCallback)((function(e,t,n){console.log(e),b(e),a(t);var r=n||new Date((new Date).getTime()+36e5);l(r),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:r.toISOString()}))}),[]),h=Object(i.useCallback)((function(){a(n),l(null),b(null),localStorage.removeItem("userData")}),[]);return Object(i.useEffect)((function(){if(console.log("timeout reached"),n&&o){var e=o.getTime()-(new Date).getTime();r=setTimeout(h,e)}else clearTimeout(r)}),[n,h,o]),Object(i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&m(e.userId,e.token)}),[m]),{token:n,login:m,logout:h,userId:j}}(),n=t.token,a=t.logout,c=t.login,s=t.userId;return Object(i.useContext)(p),e=n?Object(_.jsxs)(o.d,{children:[Object(_.jsx)(o.b,{path:"/",exact:!0,children:Object(_.jsx)(fe,{})}),Object(_.jsx)(o.b,{path:"/add-point",children:Object(_.jsx)(Re,{})}),Object(_.jsx)(o.a,{to:"/"})]}):Object(_.jsxs)(o.d,{children:[Object(_.jsx)(o.b,{path:"/",exact:!0,children:Object(_.jsx)(fe,{})}),Object(_.jsx)(o.b,{path:"/login",children:Object(_.jsx)(k,{})}),Object(_.jsx)(o.a,{to:"/"})]}),Object(_.jsx)(p.Provider,{value:{isLoggedIn:!!n,token:n,userId:s,login:c,logout:a},children:Object(_.jsx)(l.a,{children:Object(_.jsxs)("div",{style:{display:"flex"},children:[Object(_.jsx)(q,{}),e]})})})},He=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,254)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(Be,{})}),document.getElementById("root")),He()},38:function(e,t,n){e.exports={filterWrapper:"Filter_filterWrapper__1kWUk",title:"Filter_title__5-qNQ",inputsWrapper:"Filter_inputsWrapper__12LOi",btnWrapper:"Filter_btnWrapper__-hGQM",simpleFilterWrapper:"Filter_simpleFilterWrapper__3ubPq",simpleFilter:"Filter_simpleFilter__3OIsp",simpleReset:"Filter_simpleReset__F6EUh",simpleFilterPlusMinus:"Filter_simpleFilterPlusMinus__11mUa",simpleFilterMiddle:"Filter_simpleFilterMiddle__YsMMc",simpleExpand:"Filter_simpleExpand__2QpJm"}},39:function(e,t,n){e.exports={infoCardWrapper:"PointInfoCard_infoCardWrapper__3j5eB",spotsWrapper:"PointInfoCard_spotsWrapper__3OxqH",positionWrapper:"PointInfoCard_positionWrapper__lcjGg",descriptionWrapper:"PointInfoCard_descriptionWrapper__2ZROx",monthEmptyPlaceholder:"PointInfoCard_monthEmptyPlaceholder__7yhgH",BtnWrapper:"PointInfoCard_BtnWrapper__1JjHN",BtnDirection:"PointInfoCard_BtnDirection__iaqN1",BtnAdd:"PointInfoCard_BtnAdd__3sibN",simpleExpand:"PointInfoCard_simpleExpand__3j2Yz"}},62:function(e,t,n){e.exports={pageWrapper:"TripsCard_pageWrapper___cKuR",points:"TripsCard_points__2stme",tripsWrapper:"TripsCard_tripsWrapper__1Q97u",pointsWrapper:"TripsCard_pointsWrapper__1chqh",btnWrapper:"TripsCard_btnWrapper__1qTxP",BtnDirection:"TripsCard_BtnDirection__3EOfr",BtnReset:"TripsCard_BtnReset__1GXcf"}},68:function(e,t,n){e.exports={monthWrapper:"DetailLimitInfo_monthWrapper__3Y33I",spliter:"DetailLimitInfo_spliter__cENtK",dayWrapper:"DetailLimitInfo_dayWrapper__3cPag",dayTitle:"DetailLimitInfo_dayTitle__2poMi",timeStyle:"DetailLimitInfo_timeStyle__zyz7P"}},80:function(e,t,n){e.exports={monthWrapper:"SimpleLimitInfo_monthWrapper__2vTkA",spliter:"SimpleLimitInfo_spliter__3xZpS",dayWrapper:"SimpleLimitInfo_dayWrapper__k8sx6",dayTitle:"SimpleLimitInfo_dayTitle__3Rg56",timeStyle:"SimpleLimitInfo_timeStyle__2BtUu"}}},[[240,1,2]]]);
//# sourceMappingURL=main.dcdf014b.chunk.js.map