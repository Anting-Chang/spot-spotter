(this["webpackJsonpspot-spotter"]=this["webpackJsonpspot-spotter"]||[]).push([[0],{103:function(e,t,n){e.exports={pageWrapper:"Auth_pageWrapper__1Pm6y",formWrapper:"Auth_formWrapper__3I0l-",formTitle:"Auth_formTitle__1GJoM"}},104:function(e,t,n){e.exports={pageWrapper:"AddPoint_pageWrapper__30xtN",noInfoWrapper:"AddPoint_noInfoWrapper__2h-MF",noInfoSection:"AddPoint_noInfoSection__3b07K"}},105:function(e,t,n){e.exports={pageWrapper:"AddPointPanel_pageWrapper__2_XrY",positionWrapper:"AddPointPanel_positionWrapper__2SzJY",addPointWrapper:"AddPointPanel_addPointWrapper__fU6cO"}},116:function(e,t,n){e.exports={pageWrapper:"SidePanel_pageWrapper__1fJhL",advertisement:"SidePanel_advertisement__1v1Zg"}},117:function(e,t,n){e.exports={daySectionWrapper:"DaySection_daySectionWrapper__11eth",dayTitle:"DaySection_dayTitle__LeLSK"}},118:function(e,t,n){e.exports={monthSectionWrapper:"MonthSection_monthSectionWrapper__17od0",monthTitle:"MonthSection_monthTitle__3ZJ45"}},140:function(e,t,n){e.exports={pageWrapper:"Map_pageWrapper__8XAQo"}},141:function(e,t,n){e.exports={pin:"MapPoint_pin__1VJWM"}},142:function(e,t,n){e.exports={menu:"MainNavigation_menu__ArWsl"}},144:function(e,t,n){e.exports={pageWrapper:"Main_pageWrapper__33Oqw"}},145:function(e,t,n){e.exports={pageWrapper:"AddPointMap_pageWrapper__2UzRL"}},156:function(e,t,n){},158:function(e,t,n){},232:function(e,t,n){e.exports={pin:"Point_pin__3g0Rv",bounce:"Point_bounce__1EeBc",pulse:"Point_pulse__3Awnq",pulsate:"Point_pulsate__1Wqz7"}},233:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),i=n(25),c=n.n(i),s=(n(156),n(157),n.p,n(158),n(26)),l=n(58),u=n(13),p=Object(r.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),d=n(32),j=n(29),b=n.n(j),h=n(42),f=n(240),O=n(244),m=n(96),g=n(103),x=n.n(g),v=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(),i=Object(u.a)(o,2),c=i[0],s=i[1],l=Object(r.useRef)([]),p=Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r,o,i,c,u,p,d=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"GET",r=d.length>2&&void 0!==d[2]?d[2]:null,o=d.length>3&&void 0!==d[3]?d[3]:{},a(!0),i=new AbortController,l.current.push(i),c="https://spot-spotter.herokuapp.com/api/"+t,e.prev=7,e.next=10,fetch(c,{method:n,body:r,headers:o,signal:i.signal});case 10:return u=e.sent,e.next=13,u.json();case 13:if(p=e.sent,l.current=l.current.filter((function(e){return e!==i})),a(!1),u.ok){e.next=18;break}throw new Error(p.message);case 18:return e.abrupt("return",p);case 21:throw e.prev=21,e.t0=e.catch(7),s(e.t0.message),a(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[7,21]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(r.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:c,sendRequest:p,clearError:function(){s(null)}}},y=n(5),S={labelCol:{span:8},wrapperCol:{span:16}},_={wrapperCol:{offset:8,span:16}},W=function(e,t){switch(t.type){case"switch":return!1===e.isSignup?{isSignup:!0,authTitle:"Sign Up",submitBtn:"Sign Up",sideBtn:"Login"}:{isSignup:!1,authTitle:"Login",submitBtn:"Login",sideBtn:"Sign Up"}}},k=function(){var e=Object(r.useContext)(p),t=(Object(s.g)(),v()),n=t.isLoading,a=(t.error,t.sendRequest),o=t.clearError,i=Object(r.useReducer)(W,{isSignup:!1,authTitle:"Login",submitBtn:"Login",sideBtn:"Sign Up"}),c=Object(u.a)(i,2),l=c[0],j=c[1],g=Object(r.useState)(!1),k=Object(u.a)(g,2),I=(k[0],k[1],function(){var t=Object(h.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a("users/login","POST",JSON.stringify({email:n.email,password:n.password}),{"Content-Type":"application/json"});case 3:r=t.sent,e.login(r.userId,r.token),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),setTimeout((function(){o()}),5e3);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),C=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a("users/signup","POST",JSON.stringify({name:t.name,email:t.email,password:t.password}),{"Content-Type":"application/json"});case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),setTimeout((function(){o()}),5e3);case 10:return e.next=12,I(t);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{className:x.a.pageWrapper,children:Object(y.jsxs)("div",{className:x.a.formWrapper,children:[Object(y.jsx)("div",{className:x.a.formTitle,children:l.authTitle}),Object(y.jsxs)(f.a,Object(d.a)(Object(d.a)({},S),{},{name:"basic",initialValues:{remember:!0},onFinish:function(e){console.log("Success:",e),l.isSignup?C(e):I(e)},onFinishFailed:function(e){console.log("Failed:",e)},children:[l.isSignup&&Object(y.jsx)(f.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please give your account a name!"}],children:Object(y.jsx)(O.a,{})}),Object(y.jsx)(f.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(y.jsx)(O.a,{})}),Object(y.jsx)(f.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(y.jsx)(O.a.Password,{})}),Object(y.jsxs)(f.a.Item,Object(d.a)(Object(d.a)({},_),{},{children:[Object(y.jsx)(m.a,{loading:n,style:{marginRight:"10px"},type:"primary",htmlType:"submit",children:l.submitBtn}),Object(y.jsx)(m.a,{type:"dark",onClick:function(){j({type:"switch"})},children:l.sideBtn})]}))]}))]})})},I=(n(132),n(235)),C=n(246),w=n(236),T=n(237),N=n(140),P=n.n(N),M=(n(141),function(e){var t=Object(r.useState)(17),n=Object(u.a)(t,2),a=n[0],o=(n[1],Object(r.useState)()),i=Object(u.a)(o,2),c=(i[0],i[1]);return Object(y.jsx)("div",{className:P.a.pageWrapper,children:Object(y.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(y.jsxs)(I.a,{style:{height:"100vh",width:"100%"},center:{lat:45.498478,lng:-73.567705},zoom:17,scrollWheelZoom:!0,children:[Object(y.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a>14&&e.pointsList&&e.pointsList.length>0&&e.pointsList.map((function(t,n){return Object(y.jsx)(w.a,{position:{lat:t.lat,lng:t.lng},eventHandlers:{click:function(){return function(t,n){c(n),e.onClickIcon(t)}(t,n)}},children:Object(y.jsx)(T.a,{children:Object(y.jsx)("a",{href:"http://maps.google.com/?q=".concat(t.lat,",").concat(t.lng),children:"Go to Google Map"})})})}))]})})})}),E=n(241),L=n(142),A=n.n(L),D=(E.a.SubMenu,function(){var e=Object(r.useContext)(p);return Object(y.jsxs)(E.a,{onClick:function(e){console.log("click ",e)},className:A.a.menu,style:{height:"100vh"},defaultSelectedKeys:["map"],defaultOpenKeys:["sub1"],mode:"vertical",children:[Object(y.jsxs)(E.a.ItemGroup,{title:"Main Menu",children:[Object(y.jsx)(E.a.Item,{children:Object(y.jsx)(l.b,{to:"/",children:"Map"})},"map"),e.isLoggedIn&&Object(y.jsx)(E.a.Item,{children:Object(y.jsx)(l.b,{to:"/add-point",children:"Add Spot"})},"addPoint")]},"main"),Object(y.jsxs)(E.a.ItemGroup,{title:"User",children:[!e.isLoggedIn&&Object(y.jsx)(E.a.Item,{children:Object(y.jsx)(l.b,{to:"/login",children:"Login"})},"login"),e.isLoggedIn&&Object(y.jsx)(E.a.Item,{children:Object(y.jsx)(l.b,{onClick:function(){e.logout()},children:"Log Out"})},"logout")]},"user")]})}),F=n(243),R=n(116),B=n.n(R),q=n(242),H=n(78),J=n.n(H),G=q.a.Option,z=function(e){var t=Object(r.useState)(1),n=Object(u.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(1),c=Object(u.a)(i,2),s=c[0],l=c[1],p=Object(r.useState)(23),d=Object(u.a)(p,2),j=d[0],b=d[1],h=Object(r.useState)(!1),f=Object(u.a)(h,2),g=f[0],x=f[1];return Object(y.jsxs)("div",{className:J.a.filterWrapper,children:[Object(y.jsx)("div",{className:J.a.title,onClick:function(){return x((function(e){return!e}))},children:"Paradoxical Time Filter"}),g&&Object(y.jsx)("div",{children:"This filter is special. You need to enter your upper and lower limit time of arrival.(If you can arrive at Monday between 5pm and 6pm, then enter Mon,5pm,6pm) It is going to filter all the spots that just become available in this time range. If a spot has 'No parking' before 6pm, then if you arrive at 5:45pm, you will be guaranteed a spot, just wait until 6pm and leave.(unless its really downtown, people park there even they are going to get a ticket) It's paradoxical because it filters when the spot is unusable rather than when its usable."}),Object(y.jsxs)("div",{className:J.a.inputsWrapper,children:[Object(y.jsxs)(O.a.Group,{compact:!0,children:[Object(y.jsxs)(q.a,{onChange:function(e){o(e)},defaultValue:1,children:[Object(y.jsx)(G,{value:1,children:"Mon"}),Object(y.jsx)(G,{value:2,children:"Tue"}),Object(y.jsx)(G,{value:3,children:"Wed"}),Object(y.jsx)(G,{value:4,children:"Thu"}),Object(y.jsx)(G,{value:5,children:"Fri"}),Object(y.jsx)(G,{value:6,children:"Sat"}),Object(y.jsx)(G,{value:0,children:"Sun"})]}),Object(y.jsx)(q.a,{onChange:function(e){l(e)},defaultValue:1,style:{marginLeft:"10px"},children:Array(24).fill(1).map((function(e,t){return Object(y.jsxs)(G,{value:t,children:[t,":00"]},t)}))}),Object(y.jsx)(O.a,{className:"site-input-split",style:{width:30,borderLeft:0,borderRight:0,pointerEvents:"none"},placeholder:"~",disabled:!0}),Object(y.jsx)(q.a,{onChange:function(e){b(e)},defaultValue:23,children:Array(24).fill(1).map((function(e,t){return Object(y.jsxs)(G,{value:t,children:[t,":00"]},t)}))})]}),Object(y.jsxs)("div",{className:J.a.btnWrapper,children:[Object(y.jsx)(m.a,{type:"primary",onClick:function(){e.onFilter({day:a,startHour:s,endHour:j})},style:{marginRight:"10px"},children:"Filter"}),Object(y.jsx)(m.a,{type:"dark",onClick:e.onReset,children:"Reset"})]})]})]})},U={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},V={0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"WeekDay",8:"All Week"},K=n(41),X=n.n(K),Z=function(e){return Object(y.jsxs)("div",{className:X.a.infoCardWrapper,children:[e.info.limit&&e.info.limit.map((function(e,t){return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:X.a.monthWrapper,children:[U[e.monthStart]," to ",U[e.monthEnd]]}),Object(y.jsx)("div",{className:X.a.spliter}),e.day.map((function(e,t){return Object(y.jsxs)("div",{className:X.a.dayWrapper,children:[Object(y.jsxs)("div",{className:X.a.dayTitle,children:[V[e.num],":"]}),Object(y.jsx)("div",{className:X.a.timeStyle,children:e.time.map((function(e,t){return Object(y.jsx)("div",{children:"".concat(e.startHour,":").concat(e.startMinute," to ").concat(e.endHour,":").concat(e.endMinute)})}))})]},t)})),Object(y.jsx)("div",{className:X.a.spliter})]},t)})),Object(y.jsxs)("div",{className:X.a.spotsWrapper,children:[Object(y.jsx)("div",{children:"Spots Amount :"}),Object(y.jsx)("div",{children:e.info.numSpots})]}),Object(y.jsx)("div",{className:X.a.positionWrapper,children:Object(y.jsxs)("div",{children:[e.info.lat,",",e.info.lng]})}),Object(y.jsx)("div",{className:X.a.positionWrapper,children:Object(y.jsx)("a",{href:"http://maps.google.com/?q=".concat(e.info.lat,",").concat(e.info.lng),children:"Go to Google Map"})}),Object(y.jsx)("div",{className:X.a.positionWrapper,children:e.info.creator===e.userId&&Object(y.jsx)(m.a,{type:"primary",danger:!0,onClick:function(){return e.onDeleteSpot()},children:"Delete"})})]})},Q=function(e){var t=Object(r.useContext)(p),n=v(),a=n.isLoading,o=n.error,i=n.sendRequest,c=(n.clearError,Object(r.useState)(0)),s=Object(u.a)(c,2),l=s[0],d=s[1],j=Object(r.useState)(!0),f=Object(u.a)(j,2),O=f[0],m=f[1];Object(r.useEffect)((function(){setTimeout((function(){m(!1)}),8e3)}),[]);var g=function(){var n=Object(h.a)(b.a.mark((function n(){var a;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i("spot/deleteSpot/".concat(e.info.id),"DELETE",{},{Authorization:"Bearer "+t.token});case 3:a=n.sent,console.log(a),o||(d(1),setTimeout((function(){d(0)}),5e3),e.onDeleteSpot(e.info.id)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),d(2),setTimeout((function(){d(0)}),5e3);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:B.a.pageWrapper,children:[O&&Object(y.jsx)("div",{className:B.a.advertisement,children:Object(y.jsx)("a",{href:"https://www.linkedin.com/in/chang-anting-87a619a5/",style:{textDecoration:"underline"},children:"Anting is currently looking for a FontEnd Dev job"})}),Object(y.jsx)(z,{onFilter:function(t){e.onFilter(t)},onReset:function(){return e.onReset()}}),null!==e.info&&Object(y.jsx)("div",{children:Object(y.jsx)(Z,{loading:a,info:e.info,userId:t.userId,onDeleteSpot:g})}),1===l&&Object(y.jsx)(F.a,{style:{marginTop:"10px"},message:"Successfully Deleted",type:"success"}),2===l&&Object(y.jsx)(F.a,{style:{marginTop:"10px"},message:"Delete failed",type:"danger"})]})},Y=n(144),$=n.n(Y),ee=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(null),i=Object(u.a)(o,2),c=i[0],s=i[1],l=Object(r.useState)(null),p=Object(u.a)(l,2),d=p[0],j=p[1],f=v(),O=(f.isLoading,f.error,f.sendRequest);f.clearError;Object(r.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("spot/getAllSpots");case 3:t=e.sent,s(t.spot),j(t.spot),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);Object(r.useEffect)((function(){console.log(c)}),[c]);return Object(y.jsxs)("div",{className:$.a.pageWrapper,children:[Object(y.jsx)(M,{onClickIcon:function(e){a(e),console.log(e)},pointsList:c}),Object(y.jsx)(Q,{info:n,onFilter:function(e){var t,n=e.day;t=e.day<=5&&e.day>0?7:-1;var a=e.startHour,r=e.endHour;console.log("reached filterList"),s((function(e){console.log("reached");var o=new Array,i=!1;return d.map((function(e){e.limit.map((function(e){e.day.map((function(e){console.log(e),e.num!=n&&8!=e.num&&e.num!=t||e.time.map((function(e){console.log(e.startHour,e.endHour),e.endHour>=a&&e.endHour<=r&&(i=!0)}))}))})),console.log("items here",e),i&&o.push(e),i=!1})),console.log(o),o}))},onReset:function(){s(d)},onDeleteSpot:function(e){console.log("deleteSpot",e);var t=d.filter((function(t){return e!=t.id}));console.log("newArray",t),j(t),s(t)}})]})},te=n(145),ne=n.n(te),ae=(n(232),n(238)),re=function(e){var t=Object(ae.a)({click:function(n){console.log(n),e.onClickPoint(n.latlng),t.locate()},locationfound:function(e){console.log("location found:",e)}});return null},oe=function(e){var t=Object(r.useState)({lat:45.498478,lng:-73.567705}),n=Object(u.a)(t,2),a=n[0],o=n[1];return Object(y.jsx)("div",{className:ne.a.pageWrapper,children:Object(y.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(y.jsxs)(I.a,{style:{height:"100vh",width:"100%"},center:{lat:45.498478,lng:-73.567705},zoom:17,scrollWheelZoom:!0,children:[Object(y.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(y.jsx)(re,{onClickPoint:function(t){var n=t.lat,a=t.lng;o({lat:n,lng:a}),e.onChoosePoint({lat:n,lng:a})}}),Object(y.jsx)(w.a,{position:a})]})})})},ie=n(104),ce=n.n(ie),se=n(119),le=n(239),ue=n(117),pe=n.n(ue),de=function(e){var t=Object(r.useState)(!0),n=Object(u.a)(t,2),a=n[0],o=(n[1],Object(r.useState)({})),i=Object(u.a)(o,2),c=i[0],s=i[1],l=Object(r.useState)({}),p=Object(u.a)(l,2),j=p[0],b=p[1],h=Object(r.useState)([]),f=Object(u.a)(h,2),O=f[0],g=f[1];return Object(y.jsxs)("div",{className:pe.a.daySectionWrapper,children:[Object(y.jsx)("div",{className:pe.a.dayTitle,children:V[e.day.num]}),O&&O.length>0&&O.map((function(e,t){return Object(y.jsx)("div",{children:Object(y.jsxs)("div",{children:[e.startHour,":",e.startMinute," to ",e.endHour,":",e.endMinute]})},t)})),a&&Object(y.jsxs)("div",{children:[Object(y.jsx)(le.a,{onChange:function(e,t){s({startHour:t.slice(0,2),startMinute:t.slice(3,5)})}}),Object(y.jsx)(le.a,{onChange:function(e,t){b({endHour:t.slice(0,2),endMinute:t.slice(3,5)})}}),Object(y.jsx)(m.a,{style:{marginLeft:"10px"},type:"primary",onClick:function(){g((function(t){var n=t.concat(Object(d.a)(Object(d.a)({},c),j));return e.onSubmitTime(n,e.index),n}))},children:"Add"})]})]})},je=n(118),be=n.n(je),he=q.a.Option,fe=function(e){var t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(1),c=Object(u.a)(i,2),s=c[0],l=c[1],p=function(t,n){o((function(a){return a[n].time=t,console.log("submitted time",a),e.onSubmitDay(a,e.index),a}))};return Object(y.jsxs)("div",{className:be.a.monthSectionWrapper,children:[Object(y.jsxs)("div",{className:be.a.monthTitle,children:[U[e.month.monthStart]," to ",U[e.month.monthEnd]]}),a&&a.length>0&&a.map((function(e,t){return Object(y.jsx)(de,{day:e,index:t,onSubmitTime:p},t)})),Object(y.jsxs)("div",{children:[Object(y.jsxs)(q.a,{onChange:function(e){l(e),console.log(e)},defaultValue:1,children:[Object(y.jsx)(he,{value:1,children:"Mon"}),Object(y.jsx)(he,{value:2,children:"Tue"}),Object(y.jsx)(he,{value:3,children:"Wed"}),Object(y.jsx)(he,{value:4,children:"Thu"}),Object(y.jsx)(he,{value:5,children:"Fri"}),Object(y.jsx)(he,{value:6,children:"Sat"}),Object(y.jsx)(he,{value:0,children:"Sun"}),Object(y.jsx)(he,{value:7,children:"WeekDay"}),Object(y.jsx)(he,{value:8,children:"AllWeek"})]}),Object(y.jsx)(m.a,{style:{marginLeft:"10px"},type:"primary",onClick:function(){o((function(e){console.log("day submitted",s);var t=e.concat({num:s,time:[]});return console.log("day submitted",t),t}))},children:"Add"})]})]})},Oe=n(105),me=n.n(Oe),ge=(q.a.Option,se.a.RangePicker),xe=function(e){var t=Object(r.useState)({}),n=Object(u.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)([]),c=Object(u.a)(i,2),s=c[0],l=c[1],p=Object(r.useState)(5),d=Object(u.a)(p,2),j=d[0],b=d[1],h=Object(r.useState)({ifInputError:!1,message:""}),f=Object(u.a)(h,2),g=f[0],x=f[1];Object(r.useEffect)((function(){l([])}),[e.sendSuccessful]);var v=function(){l([]),o((function(e){return{monthStart:e.monthStart,monthEnd:e.monthEnd,day:[]}}))},S=function(e,t){console.log("main section reached"),l((function(n){return n[t].day=e,console.log("main section",n),n}))};return Object(y.jsx)("div",{className:me.a.pageWrapper,children:e.point&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:me.a.positionWrapper,children:[Object(y.jsxs)("div",{children:["lat: ",e.point.lat]}),Object(y.jsxs)("div",{children:["lat: ",e.point.lng]})]}),Object(y.jsxs)("div",{className:me.a.addPointWrapper,children:[s&&s.length>0&&s.map((function(e,t){return Object(y.jsx)(fe,{month:e,index:t,onSubmitDay:S},t)})),Object(y.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(y.jsx)(ge,{onChange:function(e,t){console.log("date String",t);var n=t[0].split("-")[1]-1,a=t[1].split("-")[1]-1;o({monthStart:n,monthEnd:a,day:[]})},picker:"month",bordered:!1}),Object(y.jsx)(m.a,{type:"primary",onClick:function(){l((function(e){var t=e.concat(a);return console.log(t),t}))},children:"Add"})]}),Object(y.jsx)("div",{style:{marginBottom:16},children:Object(y.jsx)(O.a,{addonBefore:"Number of Spots",defaultValue:"5",onChange:function(e){b(e.target.value)}})}),Object(y.jsx)(m.a,{type:"primary",onClick:function(){var t=!1;return 0===s.length?x({ifInputError:!0,message:"Month range is empty!"}):(s.map((function(e){0===e.day.length&&(t=!0,x({ifInputError:!0,message:"Day or time is empty!"}))})),console.log(s),t?void 0:j>0&&j<50?(x({ifInputError:!1,message:""}),v(),e.onSubmitMonth(s,j)):void x({ifInputError:!0,message:"Number of Spots not valid!"}))},loading:e.loading,style:{marginRight:"10px"},children:"Submit"}),Object(y.jsx)(m.a,{style:{marginBottom:"10px"},type:"dark",onClick:v,children:"Reset"}),e.error&&Object(y.jsx)(F.a,{message:"Add spot failed",type:"error"}),e.sendSuccessful&&Object(y.jsx)(F.a,{message:"Add spot success",type:"success"}),g.ifInputError&&Object(y.jsx)(F.a,{message:g.message,type:"error"})]})]})})},ve=function(){var e=Object(r.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(!1),i=Object(u.a)(o,2),c=i[0],s=i[1],l=v(),d=l.isLoading,j=l.error,f=l.sendRequest,O=l.clearError,m=Object(r.useContext)(p),g=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("send post point",n),e.prev=1,e.next=4,f("spot/postSpot","POST",JSON.stringify(n),{"Content-Type":"application/json",Authorization:"Bearer "+m.token});case 4:e.sent,j||(s(!0),setTimeout((function(){a(null),s(!1)}),5e3)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){O()}),5e3);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:ce.a.pageWrapper,children:[Object(y.jsx)(oe,{onChoosePoint:function(e){a(e)}}),null==n&&Object(y.jsx)("div",{className:ce.a.noInfoWrapper,children:Object(y.jsx)("div",{className:ce.a.noInfoSection,children:"No point is choosen, please click on the map to choose a point"})}),n&&Object(y.jsx)(xe,{point:n,error:j,sendSuccessful:c,loading:d,onSubmitMonth:function(e,t){a((function(n){return n.limit=e,n.numSpots=t,n})),g()}})]})};var ye=function(){var e,t=function(){console.log("app is rerendering");var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(),c=Object(u.a)(i,2),s=c[0],l=c[1],p=Object(r.useState)(),d=Object(u.a)(p,2),j=d[0],b=d[1],h=Object(r.useCallback)((function(e,t,n){console.log(e),b(e),o(t);var a=n||new Date((new Date).getTime()+36e5);l(a),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:a.toISOString()}))}),[]),f=Object(r.useCallback)((function(){o(n),l(null),b(null),localStorage.removeItem("userData")}),[]);return Object(r.useEffect)((function(){if(console.log("timeout reached"),n&&s){var e=s.getTime()-(new Date).getTime();a=setTimeout(f,e)}else clearTimeout(a)}),[n,f,s]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&h(e.userId,e.token)}),[h]),{token:n,login:h,logout:f,userId:j}}(),n=t.token,o=t.logout,i=t.login,c=t.userId;return Object(r.useContext)(p),e=n?Object(y.jsxs)(s.d,{children:[Object(y.jsx)(s.b,{path:"/",exact:!0,children:Object(y.jsx)(ee,{})}),Object(y.jsx)(s.b,{path:"/add-point",children:Object(y.jsx)(ve,{})}),Object(y.jsx)(s.a,{to:"/"})]}):Object(y.jsxs)(s.d,{children:[Object(y.jsx)(s.b,{path:"/",exact:!0,children:Object(y.jsx)(ee,{})}),Object(y.jsx)(s.b,{path:"/login",children:Object(y.jsx)(k,{})}),Object(y.jsx)(s.a,{to:"/"})]}),Object(y.jsx)(p.Provider,{value:{isLoggedIn:!!n,token:n,userId:c,login:i,logout:o},children:Object(y.jsx)(l.a,{children:Object(y.jsxs)("div",{style:{display:"flex"},children:[Object(y.jsx)(D,{}),e]})})})},Se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,247)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)}))};c.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(ye,{})}),document.getElementById("root")),Se()},41:function(e,t,n){e.exports={infoCardWrapper:"PointInfoCard_infoCardWrapper__3j5eB",dayWrapper:"PointInfoCard_dayWrapper__10XXc",dayTitle:"PointInfoCard_dayTitle__3SaGm",timeStyle:"PointInfoCard_timeStyle__2JlqC",monthWrapper:"PointInfoCard_monthWrapper__bHqi9",spliter:"PointInfoCard_spliter__N4MSR",spotsWrapper:"PointInfoCard_spotsWrapper__3OxqH",positionWrapper:"PointInfoCard_positionWrapper__lcjGg"}},78:function(e,t,n){e.exports={filterWrapper:"Filter_filterWrapper__1kWUk",title:"Filter_title__5-qNQ",inputsWrapper:"Filter_inputsWrapper__12LOi",btnWrapper:"Filter_btnWrapper__-hGQM"}}},[[233,1,2]]]);
//# sourceMappingURL=main.d081868b.chunk.js.map