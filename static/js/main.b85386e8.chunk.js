(this["webpackJsonpspot-spotter"]=this["webpackJsonpspot-spotter"]||[]).push([[0],{103:function(e,t,n){e.exports={pageWrapper:"Auth_pageWrapper__1Pm6y",formWrapper:"Auth_formWrapper__3I0l-",formTitle:"Auth_formTitle__1GJoM"}},104:function(e,t,n){e.exports={pageWrapper:"AddPoint_pageWrapper__30xtN",noInfoWrapper:"AddPoint_noInfoWrapper__2h-MF",noInfoSection:"AddPoint_noInfoSection__3b07K"}},105:function(e,t,n){e.exports={pageWrapper:"AddPointPanel_pageWrapper__2_XrY",positionWrapper:"AddPointPanel_positionWrapper__2SzJY",addPointWrapper:"AddPointPanel_addPointWrapper__fU6cO"}},116:function(e,t,n){e.exports={daySectionWrapper:"DaySection_daySectionWrapper__11eth",dayTitle:"DaySection_dayTitle__LeLSK"}},117:function(e,t,n){e.exports={monthSectionWrapper:"MonthSection_monthSectionWrapper__17od0",monthTitle:"MonthSection_monthTitle__3ZJ45"}},139:function(e,t,n){e.exports={pageWrapper:"Map_pageWrapper__8XAQo"}},140:function(e,t,n){e.exports={pin:"MapPoint_pin__1VJWM"}},141:function(e,t,n){e.exports={menu:"MainNavigation_menu__ArWsl"}},142:function(e,t,n){e.exports={pageWrapper:"SidePanel_pageWrapper__1fJhL"}},144:function(e,t,n){e.exports={pageWrapper:"Main_pageWrapper__33Oqw"}},145:function(e,t,n){e.exports={pageWrapper:"AddPointMap_pageWrapper__2UzRL"}},156:function(e,t,n){},158:function(e,t,n){},232:function(e,t,n){e.exports={pin:"Point_pin__3g0Rv",bounce:"Point_bounce__1EeBc",pulse:"Point_pulse__3Awnq",pulsate:"Point_pulsate__1Wqz7"}},233:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(25),i=n.n(c),s=(n(156),n(157),n.p,n(158),n(26)),l=n(58),u=n(13),p=Object(a.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),d=n(32),j=n(29),b=n.n(j),h=n(41),O=n(240),f=n(244),m=n(96),g=n(103),x=n.n(g),v=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(),c=Object(u.a)(o,2),i=c[0],s=c[1],l=Object(a.useRef)([]),p=Object(a.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(t){var n,a,o,c,i,u,p,d=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"GET",a=d.length>2&&void 0!==d[2]?d[2]:null,o=d.length>3&&void 0!==d[3]?d[3]:{},r(!0),c=new AbortController,l.current.push(c),i="https://spot-spotter.herokuapp.com/api/"+t,e.prev=7,e.next=10,fetch(i,{method:n,body:a,headers:o,signal:c.signal});case 10:return u=e.sent,e.next=13,u.json();case 13:if(p=e.sent,l.current=l.current.filter((function(e){return e!==c})),r(!1),u.ok){e.next=18;break}throw new Error(p.message);case 18:return e.abrupt("return",p);case 21:throw e.prev=21,e.t0=e.catch(7),s(e.t0.message),r(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[7,21]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(a.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:p,clearError:function(){s(null)}}},S=n(5),y={labelCol:{span:8},wrapperCol:{span:16}},_={wrapperCol:{offset:8,span:16}},W=function(e,t){switch(t.type){case"switch":return!1===e.isSignup?{isSignup:!0,authTitle:"Sign Up",submitBtn:"Sign Up",sideBtn:"Login"}:{isSignup:!1,authTitle:"Login",submitBtn:"Login",sideBtn:"Sign Up"}}},k=function(){var e=Object(a.useContext)(p),t=(Object(s.g)(),v()),n=t.isLoading,r=(t.error,t.sendRequest),o=t.clearError,c=Object(a.useReducer)(W,{isSignup:!1,authTitle:"Login",submitBtn:"Login",sideBtn:"Sign Up"}),i=Object(u.a)(c,2),l=i[0],j=i[1],g=Object(a.useState)(!1),k=Object(u.a)(g,2),C=(k[0],k[1],function(){var t=Object(h.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r("users/login","POST",JSON.stringify({email:n.email,password:n.password}),{"Content-Type":"application/json"});case 3:a=t.sent,e.login(a.userId,a.token),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),setTimeout((function(){o()}),5e3);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),I=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r("users/signup","POST",JSON.stringify({name:t.name,email:t.email,password:t.password}),{"Content-Type":"application/json"});case 3:e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),setTimeout((function(){o()}),5e3);case 10:return e.next=12,C(t);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:x.a.pageWrapper,children:Object(S.jsxs)("div",{className:x.a.formWrapper,children:[Object(S.jsx)("div",{className:x.a.formTitle,children:l.authTitle}),Object(S.jsxs)(O.a,Object(d.a)(Object(d.a)({},y),{},{name:"basic",initialValues:{remember:!0},onFinish:function(e){console.log("Success:",e),l.isSignup?I(e):C(e)},onFinishFailed:function(e){console.log("Failed:",e)},children:[l.isSignup&&Object(S.jsx)(O.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please give your account a name!"}],children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(O.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}],children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(O.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(S.jsx)(f.a.Password,{})}),Object(S.jsxs)(O.a.Item,Object(d.a)(Object(d.a)({},_),{},{children:[Object(S.jsx)(m.a,{loading:n,style:{marginRight:"10px"},type:"primary",htmlType:"submit",children:l.submitBtn}),Object(S.jsx)(m.a,{type:"dark",onClick:function(){j({type:"switch"})},children:l.sideBtn})]}))]}))]})})},C=(n(131),n(235)),I=n(246),T=n(236),N=n(237),w=n(139),P=n.n(w),L=(n(140),function(e){var t=Object(a.useState)(17),n=Object(u.a)(t,2),r=n[0],o=(n[1],Object(a.useState)()),c=Object(u.a)(o,2),i=(c[0],c[1]);return Object(S.jsx)("div",{className:P.a.pageWrapper,children:Object(S.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(S.jsxs)(C.a,{style:{height:"100vh",width:"100%"},center:{lat:45.498478,lng:-73.567705},zoom:17,scrollWheelZoom:!0,children:[Object(S.jsx)(I.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r>14&&e.pointsList&&e.pointsList.length>0&&e.pointsList.map((function(t,n){return Object(S.jsx)(T.a,{position:{lat:t.lat,lng:t.lng},eventHandlers:{click:function(){return function(t,n){i(n),e.onClickIcon(t)}(t,n)}},children:Object(S.jsxs)(N.a,{children:[t.lat,",",t.lng]})})}))]})})})}),M=n(241),A=n(141),E=n.n(A),D=(M.a.SubMenu,function(){var e=Object(a.useContext)(p);return Object(S.jsxs)(M.a,{onClick:function(e){console.log("click ",e)},className:E.a.menu,style:{height:"100vh"},defaultSelectedKeys:["map"],defaultOpenKeys:["sub1"],mode:"vertical",children:[Object(S.jsxs)(M.a.ItemGroup,{title:"Main Menu",children:[Object(S.jsx)(M.a.Item,{children:Object(S.jsx)(l.b,{to:"/",children:"Map"})},"map"),e.isLoggedIn&&Object(S.jsx)(M.a.Item,{children:Object(S.jsx)(l.b,{to:"/add-point",children:"Add Spot"})},"addPoint")]},"main"),Object(S.jsxs)(M.a.ItemGroup,{title:"User",children:[!e.isLoggedIn&&Object(S.jsx)(M.a.Item,{children:Object(S.jsx)(l.b,{to:"/login",children:"Login"})},"login"),e.isLoggedIn&&Object(S.jsx)(M.a.Item,{children:Object(S.jsx)(l.b,{onClick:function(){e.logout()},children:"Log Out"})},"logout")]},"user")]})}),F=n(243),R=n(142),B=n.n(R),H=n(242),J=n(78),q=n.n(J),z=H.a.Option,G=function(e){var t=Object(a.useState)(1),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(1),i=Object(u.a)(c,2),s=i[0],l=i[1],p=Object(a.useState)(23),d=Object(u.a)(p,2),j=d[0],b=d[1];return Object(S.jsxs)("div",{className:q.a.filterWrapper,children:[Object(S.jsx)("div",{className:q.a.title,children:"Time Filter"}),Object(S.jsxs)("div",{className:q.a.inputsWrapper,children:[Object(S.jsxs)(f.a.Group,{compact:!0,children:[Object(S.jsxs)(H.a,{onChange:function(e){o(e)},defaultValue:1,children:[Object(S.jsx)(z,{value:1,children:"Mon"}),Object(S.jsx)(z,{value:2,children:"Tue"}),Object(S.jsx)(z,{value:3,children:"Wed"}),Object(S.jsx)(z,{value:4,children:"Thu"}),Object(S.jsx)(z,{value:5,children:"Fri"}),Object(S.jsx)(z,{value:6,children:"Sat"}),Object(S.jsx)(z,{value:0,children:"Sun"})]}),Object(S.jsx)(H.a,{onChange:function(e){l(e)},defaultValue:1,style:{marginLeft:"10px"},children:Array(24).fill(1).map((function(e,t){return Object(S.jsxs)(z,{value:t,children:[t,":00"]},t)}))}),Object(S.jsx)(f.a,{className:"site-input-split",style:{width:30,borderLeft:0,borderRight:0,pointerEvents:"none"},placeholder:"~",disabled:!0}),Object(S.jsx)(H.a,{onChange:function(e){b(e)},defaultValue:23,children:Array(24).fill(1).map((function(e,t){return Object(S.jsxs)(z,{value:t,children:[t,":00"]},t)}))})]}),Object(S.jsxs)("div",{className:q.a.btnWrapper,children:[Object(S.jsx)(m.a,{type:"primary",onClick:function(){e.onFilter({day:r,startHour:s,endHour:j})},style:{marginRight:"10px"},children:"Filter"}),Object(S.jsx)(m.a,{type:"dark",onClick:e.onReset,children:"Reset"})]})]})]})},U={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},V={0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat",7:"WeekDay",8:"All Week"},K=n(43),X=n.n(K),Q=function(e){return Object(S.jsxs)("div",{className:X.a.infoCardWrapper,children:[e.info.limit&&e.info.limit.map((function(e,t){return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:X.a.monthWrapper,children:[U[e.monthStart]," to ",U[e.monthEnd]]}),Object(S.jsx)("div",{className:X.a.spliter}),e.day.map((function(e,t){return Object(S.jsxs)("div",{className:X.a.dayWrapper,children:[Object(S.jsxs)("div",{className:X.a.dayTitle,children:[V[e.num],":"]}),Object(S.jsx)("div",{className:X.a.timeStyle,children:e.time.map((function(e,t){return Object(S.jsx)("div",{children:"".concat(e.startHour,":").concat(e.startMinute," to ").concat(e.endHour,":").concat(e.endMinute)})}))})]},t)})),Object(S.jsx)("div",{className:X.a.spliter})]},t)})),Object(S.jsxs)("div",{className:X.a.spotsWrapper,children:[Object(S.jsx)("div",{children:"Spots Amount :"}),Object(S.jsx)("div",{children:e.info.numSpots})]}),Object(S.jsx)("div",{className:X.a.positionWrapper,children:Object(S.jsxs)("div",{children:[e.info.lat,",",e.info.lng]})}),Object(S.jsx)("div",{className:X.a.positionWrapper,children:e.info.creator===e.userId&&Object(S.jsx)(m.a,{type:"primary",danger:!0,onClick:function(){return e.onDeleteSpot()},children:"Delete"})})]})},Z=function(e){var t=Object(a.useContext)(p),n=v(),r=n.isLoading,o=n.error,c=n.sendRequest,i=(n.clearError,Object(a.useState)(0)),s=Object(u.a)(i,2),l=s[0],d=s[1],j=function(){var n=Object(h.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c("spot/deleteSpot/".concat(e.info.id),"DELETE",{},{Authorization:"Bearer "+t.token});case 3:r=n.sent,console.log(r),o||(d(1),setTimeout((function(){d(0)}),5e3),e.onDeleteSpot(e.info.id)),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),d(2),setTimeout((function(){d(0)}),5e3);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:B.a.pageWrapper,children:[Object(S.jsx)(G,{onFilter:function(t){e.onFilter(t)},onReset:function(){return e.onReset()}}),null!==e.info&&Object(S.jsx)("div",{children:Object(S.jsx)(Q,{loading:r,info:e.info,userId:t.userId,onDeleteSpot:j})}),1===l&&Object(S.jsx)(F.a,{style:{marginTop:"10px"},message:"Successfully Deleted",type:"success"}),2===l&&Object(S.jsx)(F.a,{style:{marginTop:"10px"},message:"Delete failed",type:"danger"})]})},Y=n(144),$=n.n(Y),ee=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(null),c=Object(u.a)(o,2),i=c[0],s=c[1],l=Object(a.useState)(null),p=Object(u.a)(l,2),d=p[0],j=p[1],O=v(),f=(O.isLoading,O.error,O.sendRequest);O.clearError;Object(a.useEffect)((function(){(function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f("spot/getAllSpots");case 3:t=e.sent,s(t.spot),j(t.spot),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]);Object(a.useEffect)((function(){console.log(i)}),[i]);return Object(S.jsxs)("div",{className:$.a.pageWrapper,children:[Object(S.jsx)(L,{onClickIcon:function(e){r(e),console.log(e)},pointsList:i}),Object(S.jsx)(Z,{info:n,onFilter:function(e){var t,n=e.day;t=e.day<=5&&e.day>0?7:-1;var r=e.startHour,a=e.endHour;console.log("reached filterList"),s((function(e){console.log("reached");var o=new Array,c=!1;return d.map((function(e){e.limit.map((function(e){e.day.map((function(e){console.log(e),e.num!=n&&8!=e.num&&e.num!=t||e.time.map((function(e){console.log(e.startHour,e.endHour),e.endHour>=r&&e.endHour<=a&&(c=!0)}))}))})),console.log("items here",e),c&&o.push(e),c=!1})),console.log(o),o}))},onReset:function(){s(d)},onDeleteSpot:function(e){console.log("deleteSpot",e);var t=d.filter((function(t){return e!=t.id}));console.log("newArray",t),j(t),s(t)}})]})},te=n(145),ne=n.n(te),re=(n(232),n(238)),ae=function(e){var t=Object(re.a)({click:function(n){console.log(n),e.onClickPoint(n.latlng),t.locate()},locationfound:function(e){console.log("location found:",e)}});return null},oe=function(e){var t=Object(a.useState)({lat:45.498478,lng:-73.567705}),n=Object(u.a)(t,2),r=n[0],o=n[1];return Object(S.jsx)("div",{className:ne.a.pageWrapper,children:Object(S.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(S.jsxs)(C.a,{style:{height:"100vh",width:"100%"},center:{lat:45.498478,lng:-73.567705},zoom:17,scrollWheelZoom:!0,children:[Object(S.jsx)(I.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(S.jsx)(ae,{onClickPoint:function(t){var n=t.lat,r=t.lng;o({lat:n,lng:r}),e.onChoosePoint({lat:n,lng:r})}}),Object(S.jsx)(T.a,{position:r})]})})})},ce=n(104),ie=n.n(ce),se=n(118),le=n(239),ue=n(116),pe=n.n(ue),de=function(e){var t=Object(a.useState)(!0),n=Object(u.a)(t,2),r=n[0],o=(n[1],Object(a.useState)({})),c=Object(u.a)(o,2),i=c[0],s=c[1],l=Object(a.useState)({}),p=Object(u.a)(l,2),j=p[0],b=p[1],h=Object(a.useState)([]),O=Object(u.a)(h,2),f=O[0],g=O[1];return Object(S.jsxs)("div",{className:pe.a.daySectionWrapper,children:[Object(S.jsx)("div",{className:pe.a.dayTitle,children:V[e.day.num]}),f&&f.length>0&&f.map((function(e,t){return Object(S.jsx)("div",{children:Object(S.jsxs)("div",{children:[e.startHour,":",e.startMinute," to ",e.endHour,":",e.endMinute]})},t)})),r&&Object(S.jsxs)("div",{children:[Object(S.jsx)(le.a,{onChange:function(e,t){s({startHour:t.slice(0,2),startMinute:t.slice(3,5)})}}),Object(S.jsx)(le.a,{onChange:function(e,t){b({endHour:t.slice(0,2),endMinute:t.slice(3,5)})}}),Object(S.jsx)(m.a,{style:{marginLeft:"10px"},type:"primary",onClick:function(){g((function(t){var n=t.concat(Object(d.a)(Object(d.a)({},i),j));return e.onSubmitTime(n,e.index),n}))},children:"Add"})]})]})},je=n(117),be=n.n(je),he=H.a.Option,Oe=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)(1),i=Object(u.a)(c,2),s=i[0],l=i[1],p=function(t,n){o((function(r){return r[n].time=t,console.log("submitted time",r),e.onSubmitDay(r,e.index),r}))};return Object(S.jsxs)("div",{className:be.a.monthSectionWrapper,children:[Object(S.jsxs)("div",{className:be.a.monthTitle,children:[U[e.month.monthStart]," to ",U[e.month.monthEnd]]}),r&&r.length>0&&r.map((function(e,t){return Object(S.jsx)(de,{day:e,index:t,onSubmitTime:p},t)})),Object(S.jsxs)("div",{children:[Object(S.jsxs)(H.a,{onChange:function(e){l(e),console.log(e)},defaultValue:1,children:[Object(S.jsx)(he,{value:1,children:"Mon"}),Object(S.jsx)(he,{value:2,children:"Tue"}),Object(S.jsx)(he,{value:3,children:"Wed"}),Object(S.jsx)(he,{value:4,children:"Thu"}),Object(S.jsx)(he,{value:5,children:"Fri"}),Object(S.jsx)(he,{value:6,children:"Sat"}),Object(S.jsx)(he,{value:0,children:"Sun"}),Object(S.jsx)(he,{value:7,children:"WeekDay"}),Object(S.jsx)(he,{value:8,children:"AllWeek"})]}),Object(S.jsx)(m.a,{style:{marginLeft:"10px"},type:"primary",onClick:function(){o((function(e){console.log("day submitted",s);var t=e.concat({num:s,time:[]});return console.log("day submitted",t),t}))},children:"Add"})]})]})},fe=n(105),me=n.n(fe),ge=(H.a.Option,se.a.RangePicker),xe=function(e){var t=Object(a.useState)({}),n=Object(u.a)(t,2),r=n[0],o=n[1],c=Object(a.useState)([]),i=Object(u.a)(c,2),s=i[0],l=i[1],p=Object(a.useState)(5),d=Object(u.a)(p,2),j=d[0],b=d[1],h=Object(a.useState)({ifInputError:!1,message:""}),O=Object(u.a)(h,2),g=O[0],x=O[1];Object(a.useEffect)((function(){l([])}),[e.sendSuccessful]);var v=function(){l([]),o((function(e){return{monthStart:e.monthStart,monthEnd:e.monthEnd,day:[]}}))},y=function(e,t){console.log("main section reached"),l((function(n){return n[t].day=e,console.log("main section",n),n}))};return Object(S.jsx)("div",{className:me.a.pageWrapper,children:e.point&&Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:me.a.positionWrapper,children:[Object(S.jsxs)("div",{children:["lat: ",e.point.lat]}),Object(S.jsxs)("div",{children:["lat: ",e.point.lng]})]}),Object(S.jsxs)("div",{className:me.a.addPointWrapper,children:[s&&s.length>0&&s.map((function(e,t){return Object(S.jsx)(Oe,{month:e,index:t,onSubmitDay:y},t)})),Object(S.jsxs)("div",{style:{marginBottom:"10px"},children:[Object(S.jsx)(ge,{onChange:function(e,t){console.log("date String",t);var n=t[0].split("-")[1]-1,r=t[1].split("-")[1]-1;o({monthStart:n,monthEnd:r,day:[]})},picker:"month",bordered:!1}),Object(S.jsx)(m.a,{type:"primary",onClick:function(){l((function(e){var t=e.concat(r);return console.log(t),t}))},children:"Add"})]}),Object(S.jsx)("div",{style:{marginBottom:16},children:Object(S.jsx)(f.a,{addonBefore:"Number of Spots",defaultValue:"5",onChange:function(e){b(e.target.value)}})}),Object(S.jsx)(m.a,{type:"primary",onClick:function(){var t=!1;return 0===s.length?x({ifInputError:!0,message:"Month range is empty!"}):(s.map((function(e){0===e.day.length&&(t=!0,x({ifInputError:!0,message:"Day or time is empty!"}))})),console.log(s),t?void 0:j>0&&j<50?(x({ifInputError:!1,message:""}),v(),e.onSubmitMonth(s,j)):void x({ifInputError:!0,message:"Number of Spots not valid!"}))},loading:e.loading,style:{marginRight:"10px"},children:"Submit"}),Object(S.jsx)(m.a,{style:{marginBottom:"10px"},type:"dark",onClick:v,children:"Reset"}),e.error&&Object(S.jsx)(F.a,{message:"Add spot failed",type:"error"}),e.sendSuccessful&&Object(S.jsx)(F.a,{message:"Add spot success",type:"success"}),g.ifInputError&&Object(S.jsx)(F.a,{message:g.message,type:"error"})]})]})})},ve=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),c=Object(u.a)(o,2),i=c[0],s=c[1],l=v(),d=l.isLoading,j=l.error,O=l.sendRequest,f=l.clearError,m=Object(a.useContext)(p),g=function(){var e=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("send post point",n),e.prev=1,e.next=4,O("spot/postSpot","POST",JSON.stringify(n),{"Content-Type":"application/json",Authorization:"Bearer "+m.token});case 4:e.sent,j||(s(!0),setTimeout((function(){r(null),s(!1)}),5e3)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),setTimeout((function(){f()}),5e3);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:ie.a.pageWrapper,children:[Object(S.jsx)(oe,{onChoosePoint:function(e){r(e)}}),null==n&&Object(S.jsx)("div",{className:ie.a.noInfoWrapper,children:Object(S.jsx)("div",{className:ie.a.noInfoSection,children:"No point is choosen, please click on the map to choose a point"})}),n&&Object(S.jsx)(xe,{point:n,error:j,sendSuccessful:i,loading:d,onSubmitMonth:function(e,t){r((function(n){return n.limit=e,n.numSpots=t,n})),g()}})]})};var Se=function(){var e,t=function(){console.log("app is rerendering");var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(),i=Object(u.a)(c,2),s=i[0],l=i[1],p=Object(a.useState)(),d=Object(u.a)(p,2),j=d[0],b=d[1],h=Object(a.useCallback)((function(e,t,n){console.log(e),b(e),o(t);var r=n||new Date((new Date).getTime()+36e5);l(r),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:r.toISOString()}))}),[]),O=Object(a.useCallback)((function(){o(n),l(null),b(null),localStorage.removeItem("userData")}),[]);return Object(a.useEffect)((function(){if(console.log("timeout reached"),n&&s){var e=s.getTime()-(new Date).getTime();r=setTimeout(O,e)}else clearTimeout(r)}),[n,O,s]),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&h(e.userId,e.token)}),[h]),{token:n,login:h,logout:O,userId:j}}(),n=t.token,o=t.logout,c=t.login,i=t.userId;return Object(a.useContext)(p),e=n?Object(S.jsxs)(s.d,{children:[Object(S.jsx)(s.b,{path:"/",exact:!0,children:Object(S.jsx)(ee,{})}),Object(S.jsx)(s.b,{path:"/add-point",children:Object(S.jsx)(ve,{})}),Object(S.jsx)(s.a,{to:"/"})]}):Object(S.jsxs)(s.d,{children:[Object(S.jsx)(s.b,{path:"/",exact:!0,children:Object(S.jsx)(ee,{})}),Object(S.jsx)(s.b,{path:"/login",children:Object(S.jsx)(k,{})}),Object(S.jsx)(s.a,{to:"/"})]}),Object(S.jsx)(p.Provider,{value:{isLoggedIn:!!n,token:n,userId:i,login:c,logout:o},children:Object(S.jsx)(l.a,{children:Object(S.jsxs)("div",{style:{display:"flex"},children:[Object(S.jsx)(D,{}),e]})})})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,247)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};i.a.render(Object(S.jsx)(o.a.StrictMode,{children:Object(S.jsx)(Se,{})}),document.getElementById("root")),ye()},43:function(e,t,n){e.exports={infoCardWrapper:"PointInfoCard_infoCardWrapper__3j5eB",dayWrapper:"PointInfoCard_dayWrapper__10XXc",dayTitle:"PointInfoCard_dayTitle__3SaGm",timeStyle:"PointInfoCard_timeStyle__2JlqC",monthWrapper:"PointInfoCard_monthWrapper__bHqi9",spliter:"PointInfoCard_spliter__N4MSR",spotsWrapper:"PointInfoCard_spotsWrapper__3OxqH",positionWrapper:"PointInfoCard_positionWrapper__lcjGg"}},78:function(e,t,n){e.exports={filterWrapper:"Filter_filterWrapper__1kWUk",title:"Filter_title__5-qNQ",inputsWrapper:"Filter_inputsWrapper__12LOi",btnWrapper:"Filter_btnWrapper__-hGQM"}}},[[233,1,2]]]);
//# sourceMappingURL=main.b85386e8.chunk.js.map